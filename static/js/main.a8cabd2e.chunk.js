(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{33:function(e,t,a){e.exports=a(51)},38:function(e,t,a){},43:function(e,t,a){},45:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),l=a.n(c),i=a(31),s=(a(38),a(12)),o=a(2),u=a(11),d=a(16),m=a(17),h=a(8),p=a(19),E=a(18),b=(a(43),a(3)),v=a(14),f=a.n(v),g=a(22),y=function(e){return{type:"SAVE_EXPENSE",payload:e}},x=function(e){Object(p.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).state={email:"",password:"",isDisabled:!0},e.handleChange=e.handleChange.bind(Object(h.a)(e)),e.handleClick=e.handleClick.bind(Object(h.a)(e)),e}return Object(m.a)(a,[{key:"handleChange",value:function(e){var t=this,a=e.target,n=a.name,r=/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+.com$/,c="checkbox"===a.type?a.checked:a.value;this.setState(Object(u.a)({},n,c),(function(){var e=t.state,a=e.email,n=e.password;r.test(a)&&n.length>=6?t.setState({isDisabled:!1}):t.setState({isDisabled:!0})}))}},{key:"handleClick",value:function(){var e=this.props,t=e.history;(0,e.saveUser)(this.state.email),t.push("/ProjectTrybeWallet/carteira")}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.isDisabled;return r.a.createElement("div",{className:"background"},r.a.createElement("div",{className:"card-panel logincard"},r.a.createElement("h4",null,"TrybeWallet"),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{type:"email",name:"email",className:"input",placeholder:"Email",value:t,"data-testid":"email-input",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{type:"password",name:"password",className:"input",placeholder:"Senha",value:a,"data-testid":"password-input",onChange:this.handleChange})),r.a.createElement("button",{type:"submit",className:"btn waves-effect waves-light",disabled:n,onClick:this.handleClick},"Entrar")))}}]),a}(r.a.Component),j=Object(s.b)(null,(function(e){return{saveUser:function(t){return e({type:"SAVE_USER",payload:t})}}}))(x),C=(a(45),function(e){Object(p.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).state={id:0,count:0,value:0,description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o",isEditing:!1,exchangeRates:{}},e.handleChange=e.handleChange.bind(Object(h.a)(e)),e.handleClick=e.handleClick.bind(Object(h.a)(e)),e.handleDelete=e.handleDelete.bind(Object(h.a)(e)),e.getTotal=e.getTotal.bind(Object(h.a)(e)),e.handleEdit=e.handleEdit.bind(Object(h.a)(e)),e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.fetchCurrency)()}},{key:"getTotal",value:function(){return this.props.expenses.reduce((function(e,t){return e+t.exchangeRates[t.currency].ask*t.value}),0)}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n="checkbox"===t.type?t.checked:t.value;this.setState(Object(u.a)({},a,n))}},{key:"handleClick",value:function(e){e.preventDefault();var t=this.state,a=t.value,n=t.count,r=t.description,c=t.currency,l=t.method,i=t.tag,s=t.isEditing,o=t.id,u=t.exchangeRates,d=this.props,m=d.expenses,h=d.fetchExpense,p=d.editExpense;if(s){var E=m,b={id:o,value:a,description:r,currency:c,method:l,tag:i,exchangeRates:u},v=E.map((function(e){return e.id})).indexOf(o);E.splice(v,1,b),p(E),this.setState({isEditing:!1})}else{h({id:n,value:a,description:r,currency:c,method:l,tag:i}),this.setState((function(e){return{count:e.count+1}}))}this.setState({value:0})}},{key:"handleDelete",value:function(e){var t=e.target;(0,this.props.deleteExpense)(t.id)}},{key:"handleEdit",value:function(e){var t=e.target,a=this.props.expenses;this.setState({isEditing:!0});var n=a.find((function(e){return Number(e.id)===Number(t.id)}));this.setState({value:n.value,description:n.description,currency:n.currency,method:n.method,tag:n.tag,exchangeRates:n.exchangeRates,id:n.id})}},{key:"render",value:function(){var e=this,t=this.props,a=t.email,n=t.currencies,c=t.expenses,l=this.state,i=l.value,s=l.description,o=l.currency,u=l.method,d=l.tag,m=l.isEditing,h=this.getTotal(),p=r.a.createElement("button",{className:"waves-effect waves-light btn button",type:"submit",onClick:this.handleClick},"Adicionar despesa");return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement("h6",{"data-testid":"email-field"},"Email: ".concat(a)),r.a.createElement("h6",{"data-testid":"total-field"},"Total: ".concat(h.toFixed(2))),r.a.createElement("h6",{"data-testid":"header-currency-field"},"Moeda: BRL")),r.a.createElement("form",{className:"form row"},r.a.createElement("div",{className:"col s2"},r.a.createElement("label",{htmlFor:"value-input"},"Valor:",r.a.createElement("input",{type:"number","data-testid":"value-input",id:"value-input",name:"value",value:i,onChange:this.handleChange}))),r.a.createElement("div",{className:"col s2"},r.a.createElement("label",{htmlFor:"description-input"},"Descri\xe7\xe3o:",r.a.createElement("input",{type:"text","data-testid":"description-input",id:"description-input",name:"description",value:s,onChange:this.handleChange}))),r.a.createElement("div",{className:"col s2"},r.a.createElement("label",{htmlFor:"currency-input"},"Moeda:",r.a.createElement("select",{name:"currency",id:"currency-input",className:"browser-default","data-testid":"currency-input",onChange:this.handleChange,value:o},n&&n.map((function(e){return r.a.createElement("option",{key:e,"data-testid":e,value:e},e)}))))),r.a.createElement("div",{className:"col s2"},r.a.createElement("label",{htmlFor:"method-input"},"M\xe9todo de Pagamento:",r.a.createElement("select",{name:"method",id:"method-input",className:"browser-default","data-testid":"method-input",onChange:this.handleChange,value:u},r.a.createElement("option",{value:"Dinheiro"},"Dinheiro"),r.a.createElement("option",{value:"Cart\xe3o de cr\xe9dito"},"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",{value:"Cart\xe3o de d\xe9bito"},"Cart\xe3o de d\xe9bito")))),r.a.createElement("div",{className:"col s2"},r.a.createElement("label",{htmlFor:"tag-input"},"Tag:",r.a.createElement("select",{name:"tag",id:"tag-input",className:"browser-default","data-testid":"tag-input",onChange:this.handleChange,value:d},r.a.createElement("option",{value:"Alimenta\xe7\xe3o"},"Alimenta\xe7\xe3o"),r.a.createElement("option",{value:"Lazer"},"Lazer"),r.a.createElement("option",{value:"Trabalho"},"Trabalho"),r.a.createElement("option",{value:"Transporte"},"Transporte"),r.a.createElement("option",{value:"Sa\xfade"},"Sa\xfade")))),r.a.createElement("div",{className:"col s2"},m?r.a.createElement("button",{className:"waves-effect waves-light btn button",type:"submit",onClick:this.handleClick},"Editar despesa"):p)),r.a.createElement("table",{className:"centered teal accent-3 striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,["Descri\xe7\xe3o","Tag","M\xe9todo de pagamento","Valor","Moeda","C\xe2mbio utilizado","Valor convertido","Moeda de convers\xe3o","Editar/Excluir"].map((function(e){return r.a.createElement("th",{key:e},e)})))),r.a.createElement("tbody",null,c.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.description),r.a.createElement("td",null,t.tag),r.a.createElement("td",null,t.method),r.a.createElement("td",null,Number(t.value).toFixed(2)),r.a.createElement("td",null,t.exchangeRates[t.currency].name.split("/Real Brasileiro")),r.a.createElement("td",null,Number(t.exchangeRates[t.currency].ask).toFixed(2)),r.a.createElement("td",null,(t.exchangeRates[t.currency].ask*t.value).toFixed(2)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{type:"button","data-testid":"edit-btn",className:"waves-effect waves-light btn-small yellow darken-3",id:t.id,onClick:e.handleEdit},"E"),r.a.createElement("button",{type:"button","data-testid":"delete-btn",className:"waves-effect waves-light btn-small red darken-3",id:t.id,onClick:e.handleDelete},"X")))})))))}}]),a}(r.a.Component)),k=Object(s.b)((function(e){return{email:e.user.email,currencies:e.wallet.currencies,expenses:e.wallet.expenses}}),(function(e){return{fetchCurrency:function(){return e(function(){var e=Object(g.a)(f.a.mark((function e(t){var a,n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:return a=e.sent,e.next=6,a.json();case 6:delete(n=e.sent).USDT,r=Object.values(n),c=r.map((function(e){return e.code})),console.log(c),t({type:"GET_CURRENCY",payload:c}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}())},fetchExpense:function(t){return e((a=t,function(){var e=Object(g.a)(f.a.mark((function e(t){var n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:return n=e.sent,e.next=6,n.json();case 6:delete(r=e.sent).USDT,c=Object(b.a)(Object(b.a)({},a),{},{exchangeRates:r}),t(y(c)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()));var a},deleteExpense:function(t){return e({type:"DELETE_EXPENSE",payload:t})},editExpense:function(t){return e({type:"EDIT_EXPENSE",payload:t})}}}))(C);var w=function(){return r.a.createElement(o.c,null,r.a.createElement(o.a,{exact:!0,path:"/ProjectTrybeWallet/",component:j}),r.a.createElement(o.a,{exact:!0,path:"/ProjectTrybeWallet/carteira",component:k}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var O=a(9),N=a(29),S=a(30),T={email:""},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_USER":return Object(b.a)(Object(b.a)({},e),{},{email:t.payload});default:return e}},R=a(32),_={currencies:[],expenses:[]},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0,a=t.payload,n=t.type;switch(n){case"GET_CURRENCY":return Object(b.a)(Object(b.a)({},e),{},{currencies:Object.values(a)});case"SAVE_EXPENSE":return Object(b.a)(Object(b.a)({},e),{},{expenses:[].concat(Object(R.a)(e.expenses),[a])});case"DELETE_EXPENSE":return Object(b.a)(Object(b.a)({},e),{},{expenses:e.expenses.filter((function(e){return Number(e.id)!==Number(a)}))});case"EDIT_EXPENSE":return Object(b.a)(Object(b.a)({},e),{},{expenses:a});default:return e}},F=Object(O.combineReducers)({user:D,wallet:A}),P=Object(O.createStore)(F,Object(N.composeWithDevTools)(Object(O.applyMiddleware)(S.a)));l.a.render(r.a.createElement(s.a,{store:P},r.a.createElement(i.a,null,r.a.createElement(w,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.a8cabd2e.chunk.js.map